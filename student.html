<!DOCTYPE html> 
<html>
<head>
	<meta charset="utf-8">
	<title>Student Profile</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

	<!-- Get some nice font-->
    <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>

    <style>
    	body {
    		font-family: Helvetica, sans-serif;
    		background-color: #d3d3d3
    	}
		.navigation {
			list-style-type: none;
			margin: 0;
			padding: 0;
		}
		.item {
			display: inline;
		}
    </style>

</head>
<body>
<a href = "class.html"> < Back </a>

	<div class = "container">

		<div style="text-align: center">
			<ul class = "navigation">
				<li class="item"> student profile</li> |
				<li class="item"> <a href="grades.html">grades</a></li> |
				<li class="item"> <a href="teacher.html">comments</a></li>
			</ul>
		</div>

		<div class = "row">

			<div class = "col-md-4">
				<p>
					<img src="" width = 200 height = 200 alt="Joseph Song">
					<!-- image from http://www.montgomeryschoolsmd.org/uploadedImages/parents/parentguide09.jpg -->
				</p>
				<p>
					<div id = "studentName" style = "font-size: 30px">
					</div>
					<br>
					<div id = "studentGrade"> 
						<b> Grade: 3 </b>
					</div>
				</p>

				<h3 style = "text-align:center">Grade Report</h3>
				<table id="grades">
				  <tr>
				  	<th style="width:400px"></th>
				  	<th style="width:50px"></th>
				  </tr>

				  <!--<tr>
				    <td><b>Grade 2</b></td>
				    <td><br></td>
				  </tr>

				  <tr>
				  	<td>English </td>
				  	<td>A </td>
				  </tr>

				  <tr>
				    <td>Math</td>
				    <td>B</td>
				  </tr>

  				  <tr>
				    <td>History </td>
				    <td>B</td>
				  </tr>

  				  <tr>
				    <td>Science</td>
				    <td>A</td>
				  </tr>

				  <tr>
				  	<td><br></td>
				  </tr>

				  <tr>
				    <td><b>Grade 3</b></td>
				    <td></td>
				  </tr>

				  <tr>
				  	<td>English </td>
				  	<td>B</td>
				  </tr>

				  <tr>
				    <td>Math</td>
				    <td>B</td>
				  </tr>

  				  <tr>
				    <td>History </td>
				    <td>A</td>
				  </tr>

  				  <tr>
				    <td>Science</td>
				    <td>B</td>
				  </tr>-->

				</table>
			</div>

			<br>
			<br>
			<br>
			<br>

			<div class = "col-md-8">
				<h3 style = "text-align:center">Teacher Comments</h3>
				<table id="comments">
				  <tr>
				  	<th style="width:600px"></th>
				  	<th style="width:100px; text-align:right;"></th>
				  </tr>
				  <!--
				  <tr>
				    <td><b>Style of Learning</b></td>
				    <td><br></td>
				  </tr>

				  <tr>
				  	<td>Joseph is a very visual learner and particularly enjoys drawing and watching videos. He is good at grasping concepts related to shapes and has picked up math very quickly. </td>
				  	<td>- Mrs. Smith</td>
				  </tr>

				  <tr>
				  	<td><br></td>
				  </tr>

  				  <tr>
				    <td><b>Behavior</b></td>
				    <td><br></td>
				  </tr>

				  <tr>
				  	<td>Joseph tends to be very quiet and reserved. He is generally well-behaved. However, he gets cranky very easily when tired. </td>
				  	<td>- Mrs. Smith</td>
				  </tr>

				  <tr>
				  	<td><br></td>
				  </tr>				  

				  <tr>
				    <td><b>Strengths</b></td>
				    <td><br></td>
				  </tr>

				  <tr>
				  	<td>As mentioned above, Joseph is quick to pick up on math concepts, in particular geometry. He seems to have a good understanding of the logic involved in these sorts of tasks and understands them very quickly. </td>
				  	<td>- Mrs. Smith</td>
				  </tr>

				  <tr>
				  	<td><br></td>
				  </tr>				  

				  <tr>
				    <td><b>Style of Learning</b></td>
				    <td><br></td>
				  </tr>

				  <tr>
				  	<td>Joseph is a very visual learner and particularly enjoys drawing and watching videos. He is good at grasping concepts related to shapes and has picked up math very quickly. </td>
				  	<td>- Mrs. Smith</td>
				  </tr>
				  
				  <tr>
				  	<td><br></td>
				  </tr>
				  -->
				</table>	
			</div>

		</div>
		<div class = "row">
			<div class = "col-md-4">
				<br>
				<div style = "text-align: right"> <a id = "gradesLink" href = "grades.html">View details</a> </div>

			</div>

			<div class = "col-md-8">
				<br>
				<div style = "text-align: right"> <a id = "commentsLink" href = "teacher.html">View details</a> </div>
			</div>
		</div> 
		<script type="text/javascript">
				$.urlParam = function(name){
				    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
				    if (results==null){
				       return null;
				    }
				    else{
				       return results[1] || 0;
				    }
				}

				function avg_to_grade(avg) {
					var grade = '';
					if (avg > 90)
						grade = 'A'
					else if (avg > 80)
						grade = 'B'
					else if (avg > 70)
						grade = 'C'
					else if (avg > 60)
						grade = 'D'
					else
						grade = 'E'
					if (avg % 10 > 6)
						grade += '+'
				    else if (avg % 10 < 4)
				    	grade += '-'
					return grade
				}
				function capitalize(string) {
    				return string.charAt(0).toUpperCase() + string.slice(1);
				}
				$(function(){
        		$.getJSON('data/studentData.json',function(dat){
            		console.log('success');
            		var id = $.urlParam('id');
            		$("#gradesLink").attr("href", function(){return "grades.html?id=" +id;});
            		$("#commentsLink").attr("href", function(){return "teacher.html?id=" +id;});
            		var student = dat[id];
            		$("#studentName").html("<h2><b>" + student.name + "</h2></b>");
            		// $("#studentGrade").html("<b>" + student.name + "</b>");
            		$("img").attr('src', student.picture);
            		var teacher = student.year[0].teacher;
            		console.log(student.year[0].comments);
            		$.each((student.year[0]).comments, function(key, value){
            			$("#comments").append("<tr><td><b>" + capitalize(key) + "</b></td><td><br></td></tr>");
            			$("#comments").append("<tr><td>"+ value + "</td><td>-"+ teacher + "</td></tr>");
            			$("#comments").append("<tr><td><br></td></tr>");
            		})
            		$("#grades").append("<tr><td><b>"+teacher+"</b></td><td><br></td></tr>")
            		console.log(teacher)
            		$.each((student.year[0]).grades, function(key,value){
            			var num_grades = 0
            			var total_grades = 0
            			for (var k in value){
            				num_grades += 1;
            				total_grades += value[k];
            			} 
            			avg = total_grades / num_grades;
            			$("#grades").append("<tr><td>"+capitalize(key)+"</td><td>"+avg_to_grade(avg)+"</td></tr>")
            		})
            		/*$.each(dat,function(index, stud){
            			var a = document.createElement("img");
						a.src = stud.picture;
						a.height = 150;
						a.width = 150;
            			$( ".cont" ).append( "<div class=student id=" + index + "></div>");
            			$( "#" + index).append("<a href='student.html?id=" + index + "'>" + stud.name + "</a><br>");
            			$( "#" + index).append(a);
            		});*/
        		}).error(function(){
            		console.log('error');
       			});
   			});
		</script>
	</div>

</body>
</html>
